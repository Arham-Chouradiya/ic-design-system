"use strict";(self.webpackChunkic_design_system=self.webpackChunkic_design_system||[]).push([[6419],{6419:function(t,e,a){a.r(e),a.d(e,{ic_tab_context:function(){return n}});var s=a(2686),i=a(9455);const n=class{constructor(t){(0,s.r)(this,t),this.tabSelect=(0,s.c)(this,"tabSelect",7),this.icTabSelect=(0,s.c)(this,"icTabSelect",7),this.linkTabs=()=>{this.tabs.forEach(((t,e)=>{const a="ic-tab-".concat(e,"-context-").concat(this.contextId),s="ic-tab-panel-".concat(e,"-context-").concat(this.contextId),n="ic-tab--".concat(e,"-context-").concat(this.contextId);t.setAttribute("id",a),t.tabId=n,t.tabPosition=e,t.setAttribute("aria-controls",s),t.setAttribute("context-id",this.contextId),this.tabPanels[e].setAttribute("id",s),this.tabPanels[e].panelId=n,this.tabPanels[e].tabPosition=e,this.tabPanels[e].setAttribute("aria-labelledby",a),this.appearance===i.I.Light&&(t.appearance=this.appearance,this.tabPanels[e].appearance=this.appearance)})),this.appearance===i.I.Light&&(this.tabGroup.appearance=this.appearance)},this.getChildren=()=>{this.tabGroup=Array.from(this.host.querySelectorAll("ic-tab-group")).find((t=>t.contextId===this.contextId)),this.tabs=Array.from(this.tabGroup.querySelectorAll("ic-tab")).filter((t=>t.contextId===this.contextId)),this.enabledTabs=this.getEnabledTabs(),this.tabPanels=Array.from(this.host.querySelectorAll("ic-tab-panel"))},this.attatchEventListeners=()=>{"automatic"===this.activationType?this.tabGroup.addEventListener("keydown",(t=>{this.handleKeyBoardNavAutomatic(t)})):this.tabGroup.addEventListener("keydown",(t=>{this.handleKeyBoardNavManual(t)}))},this.setControlledMode=()=>{void 0!==this.selectedTabIndex&&(this.controlledMode=!0,this.selectedTab=this.selectedTabIndex)},this.setInitialTab=()=>{if(this.controlledMode)this.selectedTab=this.selectedTabIndex,this.focusedTabIndex=this.selectedTabIndex;else{const t=this.tabs.findIndex((t=>t.tabId===this.enabledTabs[0].tabId));this.selectedTab=t,this.focusedTabIndex=t}},this.configureTabs=()=>{this.enabledTabs.forEach((t=>{t.selected=t.tabPosition===this.selectedTab})),this.tabPanels.forEach((t=>{t.selectedTab=this.tabs[this.selectedTab].tabId}))},this.getEnabledTabs=()=>Array.from(this.tabs).filter((t=>!t.disabled)),this.getIndexOfEnabledTab=t=>this.enabledTabs.findIndex((e=>e.tabId===this.tabs[t].tabId)),this.keyboardSelectTab=t=>{const e=this.tabs.findIndex((e=>e.tabId===this.enabledTabs[t].tabId));this.enabledTabs[t].focus(),this.controlledMode?(this.icTabSelect.emit({tabIndex:e}),this.tabSelect.emit({tabIndex:e})):this.selectedTab=e},this.keyboardFocusTab=t=>{const e=this.tabs.findIndex((e=>e.tabId===this.enabledTabs[t].tabId));this.enabledTabs[t].focus(),this.focusedTabIndex=e},this.handleKeyBoardNavAutomatic=t=>{const e=t.key,a=this.getIndexOfEnabledTab(this.selectedTab);let s=!0;switch(e){case"Home":this.keyboardSelectTab(0);break;case"End":this.keyboardSelectTab(this.enabledTabs.length-1);break;case"ArrowRight":a<this.enabledTabs.length-1?this.keyboardSelectTab(a+1):this.keyboardSelectTab(0);break;case"ArrowLeft":a>0?this.keyboardSelectTab(a-1):this.keyboardSelectTab(this.enabledTabs.length-1);break;default:s=!1}s&&t.preventDefault()},this.handleKeyBoardNavManual=t=>{const e=t.key,a=this.getIndexOfEnabledTab(this.focusedTabIndex);let s=!0;switch(e){case"Home":this.keyboardFocusTab(0);break;case"End":this.keyboardFocusTab(this.enabledTabs.length-1);break;case"ArrowRight":a<this.enabledTabs.length-1?this.keyboardFocusTab(a+1):this.keyboardFocusTab(0);break;case"ArrowLeft":a>0?this.keyboardFocusTab(a-1):this.keyboardFocusTab(this.enabledTabs.length-1);break;case"Enter":case" ":this.keyboardSelectTab(this.focusedTabIndex);break;default:s=!1}s&&t.preventDefault()},this.contextId="default",this.activationType="automatic",this.selectedTabIndex=void 0,this.appearance="dark",this.selectedTab=void 0}updateSelectedTab(t){this.selectedTab=t}tabClickHandler(t){void 0===this.selectedTabIndex&&t.detail.contextId===this.contextId&&(this.selectedTab=t.detail.position),this.icTabSelect.emit({tabIndex:t.detail.position}),this.tabSelect.emit({tabIndex:t.detail.position})}componentDidLoad(){this.setControlledMode(),this.getChildren(),this.linkTabs(),this.attatchEventListeners(),this.setInitialTab(),this.configureTabs()}componentWillUpdate(){this.configureTabs()}disconnectedCallback(){"manual"===this.activationType?this.tabGroup.removeEventListener("keydown",(t=>this.handleKeyBoardNavManual(t))):this.tabGroup.removeEventListener("keydown",(t=>this.handleKeyBoardNavAutomatic(t)))}render(){return(0,s.h)("slot",null)}get host(){return(0,s.g)(this)}static get watchers(){return{selectedTabIndex:["updateSelectedTab"]}}}}}]);
//# sourceMappingURL=6419-9714c0eea24300ee4f78.js.map